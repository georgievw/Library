{% macro print_book(book) %}
<tr>
    <td>
        <a href="/books/{{book['_id']}}"> {{book['title']}}</a> 
    </td>
    <td>{{ book['isbn'] }}</td>
    <td>{{ ', '.join(book['authors'])}}</td>
    <td>{{ ', '.join(book['genre'])}}</td>
</tr>
{% endmacro %}

{% macro print_person(person) %}
<tr>
    <td>
        <a href="/persons/{{person['_id']}}"> {{person['name']}}</a> 
    </td>
    <td>{{ person['address'] }}</td>
    <td>{{ person['phone'] }}</td>
    <td>{{ person['passport'] }}</td>
    <td>{{ person['registration_date'] }}</td>
</tr>
{% endmacro %}

{% macro print_loan(loan) %}
<tr>
    {% if loan['person_id'] %}
    <td>
        <a href="/persons/{{loan['person_id']}}"> {{loan['person_name']}}</a> 
    </td>
    {% endif %}
    {% if loan['book_id'] %}
    <td>
        <a href="/books/{{loan['book_id']}}"> {{loan['book_title']}}</a> 
    </td>
    {% endif %}
    <td>{{ loan['issue_date']}} </td>
    <td>{{ loan['return_date']}} </td>
    {% if loan['fact_return_date'] %}
    <td>{{ loan['fact_return_date'] }} </td>
    {% endif %}
</tr>
{% endmacro %}
